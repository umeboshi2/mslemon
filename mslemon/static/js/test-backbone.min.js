(function(){var b={}.hasOwnProperty,c=function(g,e){for(var d in e){if(b.call(e,d)){g[d]=e[d]}}function f(){this.constructor=g}f.prototype=e.prototype;g.prototype=new f();g.__super__=e.prototype;return g},a=function(d,e){return function(){return d.apply(e,arguments)}};jQuery(function(){var m,f,e,p,o,q,n,k,l,j,i,h,g,d;n=function(s,r){return $(".header").text("success")};f=(function(s){c(r,s);function r(){l=r.__super__.constructor.apply(this,arguments);return l}r.prototype.routes={"":"home"};return r})(Backbone.Router);e=(function(s){c(r,s);function r(){j=r.__super__.constructor.apply(this,arguments);return j}r.prototype.defaults={type:"tutwiki",name:"",content:"",created:"",modified:""};return r})(Backbone.Model);p=(function(s){c(r,s);function r(){i=r.__super__.constructor.apply(this,arguments);return i}r.prototype.model=e;r.prototype.url="/rest/sitetext";r.prototype.parse=function(t){return t.data};return r})(Backbone.Collection);m=(function(s){c(r,s);function r(){this.unrender=a(this.unrender,this);this.render=a(this.render,this);h=r.__super__.constructor.apply(this,arguments);return h}r.prototype.tagName="div";r.prototype.className="sitetext-entry";r.prototype.initialize=function(){_.bindAll(this,"render","unrender","remove");this.model.bind("change",this.render);return this.model.bind("remove",this.unrender)};r.prototype.render=function(){$(this.el).html("<span>Name: "+(this.model.get("name"))+'</span>\n<span class="action-button save">save</span>\n<span class="action-button delete">delete</span>');return this};r.prototype.unrender=function(){return $(this.el).remove()};r.prototype.remove=function(){return this.model.destroy()};r.prototype.save=function(){return this.model.save()};r.prototype.events={"click .save":"save"};return r})(Backbone.View);q=(function(r){c(s,r);function s(){this.unrender=a(this.unrender,this);this.renderForm=a(this.renderForm,this);this.render=a(this.render,this);g=s.__super__.constructor.apply(this,arguments);return g}s.prototype.tagName="div";s.prototype.className="sitetext-entry";s.prototype.initialize=function(){_.bindAll(this,"render","unrender","remove");this.model.bind("change",this.render);return this.model.bind("remove",this.unrender)};s.prototype.render=function(){$(this.el).html("<span>Name: "+(this.model.get("name"))+'</span>\n<span class="action-button edit">edit</span>\n<span class="action-button delete">delete</span>');return this};s.prototype.renderForm=function(){$(this.el).html('<div>\n<form>\n<label>Name:</label><input name="name" value=\''+(this.model.get("name"))+'\'><br>\n<label>Content:</label><textarea type="textarea" name="content" width="60" height="10">'+(this.model.get("content"))+'</textarea>\n</form>\n</div>\n<span class="action-button save">save</span>\n<span class="action-button delete">delete</span>');return this};s.prototype.unrender=function(){return $(this.el).remove()};s.prototype.remove=function(){return this.model.destroy()};s.prototype.edit=function(){return this.renderForm()};s.prototype.saveOrig=function(){this.model.set("name",$("input").val());this.model.set("content",$("textarea").val());return this.model.save()};s.prototype.save=function(){var t;t=$("textarea").val();this.model.set("name",$("input").val());this.model.set("content",t);return this.model.save()};s.prototype.events={"click .delete":"remove","click .edit":"edit","click .save":"save"};return s})(Backbone.View);o=(function(s){c(r,s);function r(){d=r.__super__.constructor.apply(this,arguments);return d}r.prototype.el=$(".something");r.prototype.initialize=function(){console.log("Init SiteTextListView");this.counter=0;this.collection=new p;return this.collection.bind("add",this.appendItem)};r.prototype.render=function(){$(this.el).append('<div class="action-button fetch-site-text-button">Fetch Site Text</div>');$(this.el).append('<div class="action-button new-site-text-button">New Site Text</div>');return $(this.el).append('<div class="site-text-list"></div>')};r.prototype.addItem=function(){var t;this.counter++;t=new e;return this.collection.add(t)};r.prototype.appendItem=function(u){var t;t=new q({model:u});return $(".site-text-list").append(t.render().el)};r.prototype.fetchItems=function(){var t;$(".header").text("foobar");return t=this.collection.fetch(function(){return{success:n}})};r.prototype.tellmereset=$(".header").text("tellmereset");r.prototype.events={"click .new-site-text-button":"addItem","click .fetch-site-text-button":"fetchItems"};return r})(Backbone.View);window.list_view=new o;window.router=new f;k=function(){console.log("Home Route");return window.list_view.render()};window.router.on("route:home",k);return Backbone.history.start()})}).call(this);