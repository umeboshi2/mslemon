(function(){$(document).ready(function(){var k,e,a,c,f,g,o,l,h,j,i,b,q,d,n,m,p;b=teacup.renderable;a=teacup.div;h=teacup.i;m=teacup.strong;n=teacup.span;i=teacup.label;j=teacup.input;p=teacup.text;c=$(".editing-space");o=$(".field-list");k=$(".add-field-button");l=b(function(r){return a(".btn.btn-default.btn-xs",function(){return p(r)})});f=b(function(r){return a({"field-id":r},"#edit-status",function(){p("Editing field");a("#save-content.action-button",function(){return p("Save")});a("#cancel-button.action-button.pull-right",function(){return p("Cancel")});return a("#field-editor")})});q=b(function(r){var s;s=".listview-entry.action-button.add-this-field";return a("#select-fields.listview-list",function(){var y,x,w,v,u,t;t=[];for(v=0,u=r.length;v<u;v++){w=r[v];x="#field-"+w.id;y=x+s;t.push(a(y,function(){return p(w.name)}))}return t})});g=function(r){$("#select-fields").remove();return window.location.reload()};d=function(s){var r,t;r=s.data;t=q(r);$(".header").append(t);return $(".add-this-field").click(function(){var z,x,y,v,A,w,u;z=$(this).attr("id");y=z.split("-");v=y[1];A=$("input[name=model_id]").val();$(".header").html(A+"-"+v);u="/rest/admin/layoutmodels/"+A;u=u+"/fields";x={field_id:v};return w=$.post(u,x,g,"json")})};e=function(r,z,x){var u,y,s,w,t,v;s=f(z);c.html(s);o.hide();k.hide();c.show();w=$("#save-content");w.hide();u=ace.edit("field-editor");TrumpetApp.editor=u;v=u.getSession();v.on("change",function(){return w.show()});if(x==="html"){v.setMode("ace/mode/html")}else{if(x==="teacup"){v.setMode("ace/mode/coffee")}}u.setTheme("ace/theme/twilight");y=function(B,A,C){if(A==="success"){w.hide()}TrumpetApp.rdata=B;TrumpetApp.rstatus=A;return TrumpetApp.rxhr=C};t=function(B,A,C){TrumpetApp.rdata=B;TrumpetApp.rstatus=A;TrumpetApp.rxhr=C;return TrumpetApp.make_alert("Error in save")};return w.click(function(){var A,B;A={update:"submit",content:u.getValue(),model_id:r,field_id:z};B="/rest/admin/layoutmodels/";B=B+r+"/fields/"+z;return $.ajax(B,{type:"PUT",data:A,success:y,error:t,dataType:"json"})})};k.click(function(){var t,s,r;t=$("input[name=model_id]").val();r="/rest/admin/layoutfields";return s=$.get(r,{},d,"json")});$(".edit-button").click(function(){var v,u,t,r,w,s;v=$(this).attr("id");u=v.split("-");t=u[1];w=$("input[name=model_id]").val();s=$(".header").text();r=$(this).attr("field-type");e(w,t,r);if(TrumpetApp.editor!==null){TrumpetApp.editor.destroy()}if(s==="Ms. Lemon"){return $(".header").html(l("FOoo-"+id))}else{return $(".header").html(l("Ms. Lemon"))}});$(".delete-button").click(function(){var t,s,u,r;t=$(this).attr("id");s=t.split("-");u=s[1];r=$(".header").text();if(r==="Ms. Lemon"){return $(".header").html(l("Delete-"+u))}else{return $(".header").html(l("Ms. Lemon"))}});return c.hide()})}).call(this);