// Generated by CoffeeScript 1.6.3
(function() {
  $(document).ready(function() {
    var button, editor, fresh_edit, session, togglefun;
    $('#save-content').hide();
    fresh_edit = function(data, status, xhr) {
      $('#save-content').hide();
      return make_alert(status, status);
    };
    editor = ace.edit('editor');
    session = editor.getSession();
    session.on('change', function() {
      return $('#save-content').show();
    });
    session.setMode('ace/mode/coffee');
    editor.setTheme('ace/theme/trumpet');
    editor.setKeyboardHandler('ace/keyboard/emacs');
    button = $('#keybinding');
    togglefun = TrumpetApp.functions.toggle_ace_keybinding;
    togglefun(button, editor);
    return $('#save-content').click(function() {
      var formdata;
      formdata = {
        update: 'submit',
        content: editor.getValue()
      };
      return $.post(window.location, formdata, fresh_edit);
    });
  });

}).call(this);
