// Generated by CoffeeScript 1.6.3
(function() {
  var __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  jQuery(function() {
    var BaseListView, BaseModelView, Router, SideView, SiteCSS, SiteCSSList, SiteCSSListView, SiteJS, SiteJSList, SiteJSListView, SitePath, SitePathList, SitePathListView, SitePathView, SiteTemplate, SiteTemplateList, SiteTemplateListView, fetch_error, fetch_success, list_views, _ref, _ref1, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9;
    fetch_success = function(collection, response) {
      return make_alert('Succesful Transfer', 'success');
    };
    fetch_error = function(collection, response) {
      return make_alert('Error in Transfer', 'error');
    };
    list_views = function() {
      return {
        'sitepath': SitePathListView,
        'sitetmpl': SiteTemplateListView,
        'sitecss': SiteCSSListView,
        'sitejs': SiteJSListView
      };
    };
    window.lviews = list_views;
    Router = (function(_super) {
      __extends(Router, _super);

      function Router() {
        _ref = Router.__super__.constructor.apply(this, arguments);
        return _ref;
      }

      Router.prototype.routes = {
        '': 'home',
        'view/:listview': 'listview'
      };

      Router.prototype.common = function() {
        var div;
        side_view.render();
        if (side_view.current_view !== null) {
          side_view.current_view.remove();
        }
        $('.right-listview').remove();
        div = '<div class="right-listview"></div>';
        return $('.right-column-content').html(div);
      };

      Router.prototype.home = function() {
        return this.common();
      };

      Router.prototype.listview = function(lview) {
        var klass, view;
        this.common();
        klass = list_views()[lview];
        view = new klass;
        view.render();
        return side_view.current_view = view;
      };

      Router.prototype.sitepath = function() {
        var view;
        this.common();
        view = new SitePathListView;
        return view.render();
      };

      Router.prototype.sitetmpl = function() {
        var view;
        this.common();
        view = new SiteTemplateListView;
        return view.render();
      };

      Router.prototype.sitecss = function() {
        var view;
        this.common();
        view = new SiteCSSListView;
        return view.render();
      };

      Router.prototype.sitejs = function() {
        var view;
        this.common();
        view = new SiteJSListView;
        return view.render();
      };

      return Router;

    })(Backbone.Router);
    SitePath = (function(_super) {
      __extends(SitePath, _super);

      function SitePath() {
        _ref1 = SitePath.__super__.constructor.apply(this, arguments);
        return _ref1;
      }

      SitePath.prototype.defaults = {
        name: ''
      };

      return SitePath;

    })(Backbone.Model);
    SiteTemplate = (function(_super) {
      __extends(SiteTemplate, _super);

      function SiteTemplate() {
        _ref2 = SiteTemplate.__super__.constructor.apply(this, arguments);
        return _ref2;
      }

      SiteTemplate.prototype.defaults = {
        name: '',
        content: ''
      };

      return SiteTemplate;

    })(Backbone.Model);
    SiteCSS = (function(_super) {
      __extends(SiteCSS, _super);

      function SiteCSS() {
        _ref3 = SiteCSS.__super__.constructor.apply(this, arguments);
        return _ref3;
      }

      SiteCSS.prototype.defaults = {
        name: '',
        content: ''
      };

      return SiteCSS;

    })(Backbone.Model);
    SiteJS = (function(_super) {
      __extends(SiteJS, _super);

      function SiteJS() {
        _ref4 = SiteJS.__super__.constructor.apply(this, arguments);
        return _ref4;
      }

      SiteJS.prototype.defaults = {
        name: '',
        content: ''
      };

      return SiteJS;

    })(Backbone.Model);
    SitePathList = (function(_super) {
      __extends(SitePathList, _super);

      function SitePathList() {
        _ref5 = SitePathList.__super__.constructor.apply(this, arguments);
        return _ref5;
      }

      SitePathList.prototype.model = SitePath;

      SitePathList.prototype.url = '/rest/sitepath';

      SitePathList.prototype.parse = function(response) {
        return response.data;
      };

      return SitePathList;

    })(Backbone.Collection);
    SiteTemplateList = (function(_super) {
      __extends(SiteTemplateList, _super);

      function SiteTemplateList() {
        _ref6 = SiteTemplateList.__super__.constructor.apply(this, arguments);
        return _ref6;
      }

      SiteTemplateList.prototype.model = SiteTemplate;

      SiteTemplateList.prototype.url = '/rest/sitetmpl';

      SiteTemplateList.prototype.parse = function(response) {
        return response.data;
      };

      return SiteTemplateList;

    })(Backbone.Collection);
    SiteCSSList = (function(_super) {
      __extends(SiteCSSList, _super);

      function SiteCSSList() {
        _ref7 = SiteCSSList.__super__.constructor.apply(this, arguments);
        return _ref7;
      }

      SiteCSSList.prototype.model = SiteCSS;

      SiteCSSList.prototype.url = '/rest/sitecss';

      SiteCSSList.prototype.parse = function(response) {
        return response.data;
      };

      return SiteCSSList;

    })(Backbone.Collection);
    SiteJSList = (function(_super) {
      __extends(SiteJSList, _super);

      function SiteJSList() {
        _ref8 = SiteJSList.__super__.constructor.apply(this, arguments);
        return _ref8;
      }

      SiteJSList.prototype.model = SiteJS;

      SiteJSList.prototype.url = '/rest/sitejs';

      SiteJSList.prototype.parse = function(response) {
        return response.data;
      };

      return SiteJSList;

    })(Backbone.Collection);
    BaseModelView = (function(_super) {
      __extends(BaseModelView, _super);

      function BaseModelView() {
        _ref9 = BaseModelView.__super__.constructor.apply(this, arguments);
        return _ref9;
      }

      BaseModelView.prototype.tagName = 'div';

      return BaseModelView;

    })(Backbone.View);
    SitePathView = (function(_super) {
      __extends(SitePathView, _super);

      function SitePathView() {
        _ref10 = SitePathView.__super__.constructor.apply(this, arguments);
        return _ref10;
      }

      SitePathView.prototype.className = 'sitepath-entry';

      SitePathView.prototype.initialize = function() {
        _.bindAll(this, 'render');
        this.model.bind('change', this.render);
        return this.model.bind('remove', this.unrender);
      };

      SitePathView.prototype.template = admin_mgr_tmpl.sitepath_entry_template;

      SitePathView.prototype.render = function() {
        var html, path, template;
        path = this.model.get('name');
        template = admin_mgr_tmpl.sitepath_entry_template;
        html = template.render({
          path: path
        });
        this.$el.html(html);
        return this;
      };

      SitePathView.prototype.unrender = function() {
        return $(this.el).remove();
      };

      SitePathView.prototype.events = {
        'click el': function() {
          return $(this.el).hide();
        }
      };

      return SitePathView;

    })(BaseModelView);
    BaseListView = (function(_super) {
      __extends(BaseListView, _super);

      function BaseListView() {
        _ref11 = BaseListView.__super__.constructor.apply(this, arguments);
        return _ref11;
      }

      BaseListView.prototype.el = $('.right-listview');

      BaseListView.prototype.render = function(data) {
        this.$el.html(this.template.render(data).el);
        $('.right-column-content').append(this.$el);
        return this;
      };

      BaseListView.prototype.events = {
        'click .fetch-button': 'fetch'
      };

      return BaseListView;

    })(Backbone.View);
    SitePathListView = (function(_super) {
      __extends(SitePathListView, _super);

      function SitePathListView() {
        this.fetch = __bind(this.fetch, this);
        this.appendItem = __bind(this.appendItem, this);
        _ref12 = SitePathListView.__super__.constructor.apply(this, arguments);
        return _ref12;
      }

      SitePathListView.prototype.el = $('.right-listview');

      SitePathListView.prototype.template = admin_mgr_tmpl.sitepath_view_template;

      SitePathListView.prototype.initialize = function() {
        console.log('Init SitePathListView');
        this.collection = new SitePathList;
        this.collection.bind('add', this.appendItem);
        return this.collection.fetch();
      };

      SitePathListView.prototype.addItem = function() {
        var item;
        item = new SitePath;
        return this.collection.add(item);
      };

      SitePathListView.prototype.appendItem = function(sitepath) {
        var path, view;
        view = new SitePathView({
          model: sitepath
        });
        path = view.render(sitepath).el;
        return $('.listview-list').append(path);
      };

      SitePathListView.prototype.fetch = function() {
        return this.collection.fetch();
      };

      return SitePathListView;

    })(BaseListView);
    SiteTemplateListView = (function(_super) {
      __extends(SiteTemplateListView, _super);

      function SiteTemplateListView() {
        _ref13 = SiteTemplateListView.__super__.constructor.apply(this, arguments);
        return _ref13;
      }

      SiteTemplateListView.prototype.template = admin_mgr_tmpl.sitetmpl_view_template;

      SiteTemplateListView.prototype.initialize = function() {
        return console.log('Init SiteTemplateListView');
      };

      return SiteTemplateListView;

    })(BaseListView);
    SiteCSSListView = (function(_super) {
      __extends(SiteCSSListView, _super);

      function SiteCSSListView() {
        _ref14 = SiteCSSListView.__super__.constructor.apply(this, arguments);
        return _ref14;
      }

      SiteCSSListView.prototype.template = admin_mgr_tmpl.sitecss_view_template;

      SiteCSSListView.prototype.initialize = function() {
        return console.log('Init SiteCSSListView');
      };

      return SiteCSSListView;

    })(BaseListView);
    SiteJSListView = (function(_super) {
      __extends(SiteJSListView, _super);

      function SiteJSListView() {
        _ref15 = SiteJSListView.__super__.constructor.apply(this, arguments);
        return _ref15;
      }

      SiteJSListView.prototype.template = admin_mgr_tmpl.sitejs_view_template;

      SiteJSListView.prototype.initialize = function() {
        return console.log('Init SiteJSListView');
      };

      return SiteJSListView;

    })(BaseListView);
    SideView = (function(_super) {
      __extends(SideView, _super);

      function SideView() {
        _ref16 = SideView.__super__.constructor.apply(this, arguments);
        return _ref16;
      }

      SideView.prototype.el = $('.sidebar');

      SideView.prototype.initialize = function() {
        console.log('Init SideView');
        return this.current_view = null;
      };

      SideView.prototype.template = admin_mgr_tmpl.side_view_template;

      SideView.prototype.render = function() {
        $(this.el).html(this.template.render());
        return this;
      };

      SideView.prototype.pathview = new SitePathListView;

      SideView.prototype.tmplview = new SiteTemplateListView;

      SideView.prototype.cssview = new SiteCSSListView;

      SideView.prototype.jsview = new SiteJSListView;

      SideView.prototype.setup_sitepath_viewer = function() {
        return this.pathview.render();
      };

      SideView.prototype.setup_sitetmpl_viewer = function() {
        return this.tmplview.render();
      };

      SideView.prototype.setup_sitecss_viewer = function() {
        return this.cssview.render();
      };

      SideView.prototype.setup_sitejs_viewer = function() {
        return this.jsview.render();
      };

      SideView.prototype.events = {
        'click .sitepaths-button': function() {
          return main_router.navigate('view/sitepath', {
            trigger: true
          });
        },
        'click .sitetmpl-button': function() {
          return main_router.navigate('view/sitetmpl', {
            trigger: true
          });
        },
        'click .sitecss-button': 'setup_sitecss_viewer',
        'click .sitejs-button': 'setup_sitejs_viewer'
      };

      return SideView;

    })(Backbone.View);
    window.side_view = new SideView;
    window.main_router = new Router;
    return Backbone.history.start();
  });

}).call(this);
