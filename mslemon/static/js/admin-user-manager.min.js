(function(){var b={}.hasOwnProperty,c=function(g,e){for(var d in e){if(b.call(e,d)){g[d]=e[d]}}function f(){this.constructor=g}f.prototype=e.prototype;g.prototype=new f();g.__super__=e.prototype;return g},a=function(d,e){return function(){return d.apply(e,arguments)}};jQuery(function(){var f,C,s,t,r,v,w,z,x,o,p,B,k,y,u,q,n,h,e,m,l,j,i,g,d,D,A;k=function(){return{user:B,group:v}};z=(function(F){c(E,F);function E(){q=E.__super__.constructor.apply(this,arguments);return q}E.prototype.routes={"":"home","view/:listview":"listview"};E.prototype.common=function(){var G;G=u;G.render();if(G.current_view!==null){return G.current_view.remove()}};E.prototype.home=function(){return this.common()};E.prototype.listview=function(H){var G,I;this.common();console.log("lview is "+H);G=k()[H];window.klass=G;I=new G;I.render({type:H});return u.current_view=I};return E})(Backbone.Router);o=(function(E){c(F,E);function F(){n=F.__super__.constructor.apply(this,arguments);return n}F.prototype.defaults={type:"user"};return F})(Backbone.Model);t=(function(F){c(E,F);function E(){m=E.__super__.constructor.apply(this,arguments);return m}E.prototype.defaults={type:"group"};return E})(Backbone.Model);p=(function(F){c(E,F);function E(){l=E.__super__.constructor.apply(this,arguments);return l}E.prototype.model=o;E.prototype.url="/rest/users";E.prototype.parse=function(G){return G.data};return E})(Backbone.Collection);r=(function(F){c(E,F);function E(){j=E.__super__.constructor.apply(this,arguments);return j}E.prototype.model=t;E.prototype.url="/rest/groups";E.prototype.parse=function(G){return G.data};return E})(Backbone.Collection);s=(function(E){c(F,E);function F(){i=F.__super__.constructor.apply(this,arguments);return i}F.prototype.template=TrumpetApp.admin_usrmgr_tmpl.entry;F.prototype.initialize=function(){_.bindAll(this,"render");this.model.bind("change",this.render);return this.model.bind("remove",this.unrender)};F.prototype.render=function(){var I,G,H;H=TrumpetApp.admin_usrmgr_tmpl;if(this.model.has("username")){G=H.user_entry}else{G=H.entry}I=G.render(this.model.attributes);this.$el.html(I);return this};F.prototype.unrender=function(){return $(this.el).remove()};F.prototype.events={"click .show-entry-btn":"showentry"};F.prototype.showentry=function(){var G;G=$(".listview-list");return G.html("HEllo")};return F})(Backbone.View);C=(function(F){c(E,F);function E(){g=E.__super__.constructor.apply(this,arguments);return g}E.prototype.el=$(".right-column-content");E.prototype.remove=function(){this.undelegateEvents();this.$el.empty();this.stopListening();return this.a};return E})(Backbone.View);w=(function(E){c(F,E);function F(){d=F.__super__.constructor.apply(this,arguments);return d}F.prototype.render=function(H){var G;return G=TrumpetApp.admin_usrmgr_tmpl.main_user_view};return F})(C);f=(function(F){c(E,F);function E(){this.appendItem=a(this.appendItem,this);D=E.__super__.constructor.apply(this,arguments);return D}E.prototype.render=function(H){var G;G=TrumpetApp.admin_usrmgr_tmpl.listview;this.$el.html(G.render(H));return this};E.prototype.modelView=s;E.prototype.appendItem=function(H){var I,G;G=new this.modelView({model:H});I=G.render(H).el;return $(".listview-list").append(I)};E.prototype.events={"click .add-entry-btn":"new_entry_view"};E.prototype.new_entry_view=function(){var I,J,H,G;J=this.collection.model;H=new J();G=TrumpetApp.admin_usrmgr_tmpl.create;I=G.render(H.attributes);return $(".listview-list").html(I)};return E})(C);B=(function(F){c(E,F);function E(){this.appendItem=a(this.appendItem,this);A=E.__super__.constructor.apply(this,arguments);return A}E.prototype.initialize=function(){console.log("Init UserListView");this.collection=new p;this.collection.bind("add",this.appendItem);return this.collection.fetch()};E.prototype.appendItem=function(H){var I,G;G=new this.modelView({model:H});window.mbview=G;I=G.render(H).el;return $(".listview-list").append(I)};return E})(f);v=(function(F){c(E,F);function E(){h=E.__super__.constructor.apply(this,arguments);return h}E.prototype.initialize=function(){console.log("Init GroupListView");this.collection=new r;this.collection.bind("add",this.appendItem);return this.collection.fetch()};return E})(f);x=(function(F){var G;c(E,F);function E(){e=E.__super__.constructor.apply(this,arguments);return e}E.prototype.el=$(".sidebar");E.prototype.initialize=function(){return this.current_view=null};E.prototype.render=function(){var H;H=TrumpetApp.admin_usrmgr_tmpl.side_view;$(this.el).html(H.render());return this};G={trigger:true,replace:true};E.prototype.events={"click .home-button":function(){return y.navigate("",G)},"click .users-button":function(){$(".listview-list").remove();y.navigate("dummy",G);return y.navigate("view/user",G)},"click .groups-button":function(){$(".listview-list").remove();y.navigate("dummy",G);return y.navigate("view/group",G)}};return E})(Backbone.View);y=new z;u=new x;return Backbone.history.start()})}).call(this);