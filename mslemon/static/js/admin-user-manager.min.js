(function(){var b={}.hasOwnProperty,c=function(g,e){for(var d in e){if(b.call(e,d)){g[d]=e[d]}}function f(){this.constructor=g}f.prototype=e.prototype;g.prototype=new f();g.__super__=e.prototype;return g},a=function(d,e){return function(){return d.apply(e,arguments)}};jQuery(function(){var e,q,r,p,t,w,u,m,n,y,i,v,s,o,l,k,j,h,g,f,d,z,x;i=function(){return{user:y,group:t}};w=(function(B){c(A,B);function A(){o=A.__super__.constructor.apply(this,arguments);return o}A.prototype.routes={"":"home","view/:listview":"listview"};A.prototype.common=function(){var C;C=s;C.render();if(C.current_view!==null){return C.current_view.remove()}};A.prototype.home=function(){return this.common()};A.prototype.listview=function(D){var C,E;this.common();console.log("lview is "+D);C=i()[D];window.klass=C;E=new C;E.render({type:D});return s.current_view=E};return A})(Backbone.Router);m=(function(A){c(B,A);function B(){l=B.__super__.constructor.apply(this,arguments);return l}B.prototype.defaults={type:"user"};return B})(Backbone.Model);r=(function(B){c(A,B);function A(){k=A.__super__.constructor.apply(this,arguments);return k}A.prototype.defaults={type:"group"};return A})(Backbone.Model);n=(function(B){c(A,B);function A(){j=A.__super__.constructor.apply(this,arguments);return j}A.prototype.model=m;A.prototype.url="/rest/users";A.prototype.parse=function(C){return C.data};return A})(Backbone.Collection);p=(function(B){c(A,B);function A(){h=A.__super__.constructor.apply(this,arguments);return h}A.prototype.model=r;A.prototype.url="/rest/groups";A.prototype.parse=function(C){return C.data};return A})(Backbone.Collection);q=(function(A){c(B,A);function B(){g=B.__super__.constructor.apply(this,arguments);return g}B.prototype.template=TrumpetApp.admin_usrmgr_tmpl.entry;B.prototype.initialize=function(){_.bindAll(this,"render");this.model.bind("change",this.render);return this.model.bind("remove",this.unrender)};B.prototype.render=function(){var E,C,D;D=TrumpetApp.admin_usrmgr_tmpl;if(this.model.has("username")){C=D.user_entry}else{C=D.entry}E=C.render(this.model.attributes);this.$el.html(E);return this};B.prototype.unrender=function(){return $(this.el).remove()};B.prototype.events={"click .show-entry-btn":"showentry"};B.prototype.showentry=function(){var C;C=$(".listview-list");return C.html("HEllo")};return B})(Backbone.View);e=(function(B){c(A,B);function A(){this.appendItem=a(this.appendItem,this);f=A.__super__.constructor.apply(this,arguments);return f}A.prototype.el=$(".right-column-content");A.prototype.render=function(D){var C;C=TrumpetApp.admin_usrmgr_tmpl.listview;this.$el.html(C.render(D));return this};A.prototype.modelView=q;A.prototype.remove=function(){this.undelegateEvents();this.$el.empty();this.stopListening();return this};A.prototype.appendItem=function(D){var E,C;C=new this.modelView({model:D});E=C.render(D).el;return $(".listview-list").append(E)};A.prototype.events={"click .add-entry-btn":"new_entry_view"};A.prototype.new_entry_view=function(){var E,F,D,C;F=this.collection.model;D=new F();C=TrumpetApp.admin_usrmgr_tmpl.create;E=C.render(D.attributes);return $(".listview-list").html(E)};return A})(Backbone.View);y=(function(B){c(A,B);function A(){this.appendItem=a(this.appendItem,this);d=A.__super__.constructor.apply(this,arguments);return d}A.prototype.initialize=function(){console.log("Init UserListView");this.collection=new n;this.collection.bind("add",this.appendItem);return this.collection.fetch()};A.prototype.appendItem=function(D){var E,C;C=new this.modelView({model:D});window.mbview=C;E=C.render(D).el;return $(".listview-list").append(E)};return A})(e);t=(function(B){c(A,B);function A(){z=A.__super__.constructor.apply(this,arguments);return z}A.prototype.initialize=function(){console.log("Init GroupListView");this.collection=new p;this.collection.bind("add",this.appendItem);return this.collection.fetch()};return A})(e);u=(function(B){var C;c(A,B);function A(){x=A.__super__.constructor.apply(this,arguments);return x}A.prototype.el=$(".sidebar");A.prototype.initialize=function(){return this.current_view=null};A.prototype.render=function(){var D;D=TrumpetApp.admin_usrmgr_tmpl.side_view;$(this.el).html(D.render());return this};C={trigger:true,replace:true};A.prototype.events={"click .home-button":function(){return v.navigate("",C)},"click .users-button":function(){$(".listview-list").remove();v.navigate("dummy",C);return v.navigate("view/user",C)},"click .groups-button":function(){$(".listview-list").remove();v.navigate("dummy",C);return v.navigate("view/group",C)}};return A})(Backbone.View);v=new w;s=new u;return Backbone.history.start()})}).call(this);